var eventplanner=angular.module("EventPlanner",["ui.bootstrap","smart-table","ngRoute"]);eventplanner.config(["$httpProvider","$routeProvider",function(e,t){e.defaults.headers.get||(e.defaults.headers.get={foobar:(new Date).getTime()}),e.defaults.headers.get["If-Modified-Since"]="Mon, 26 Jul 1997 05:00:00 GMT",e.defaults.headers.get["Cache-Control"]="no-cache",e.defaults.headers.get.Pragma="no-cache",t.when("/evenementen",{templateUrl:"/Content/app/partials/evenementlist.html",controller:"ReservatiesCtrl"}).when("/evenement/:evenementId",{templateUrl:"/Content/app/partials/evenement.html",controller:"ReservatieDetailCtrl"}).otherwise({redirectTo:"/evenementen"})}]),eventplanner.run(["$rootScope",function(e){e.openCalendar=function(t,n){t.preventDefault(),t.stopPropagation(),e[n]={},e[n].opened=!0}}]),eventplanner.controller("DetailEvenementCtrl",["$scope","reservatieSvc",function(e,t){e.detailEvenementOpslaan=function(){t.detailsEvenementOpslaan(e.evenement)},e.init=function(){t.getReservatieData(e.evenementId).then(function(t){e.evenement=t.evenement,e.reservatieData=t.reservatieData})}}]),eventplanner.controller("ReservatieDetailCtrl",["$scope",function(e){e.nieuwePeriodeToevoegenVisibility={visible:!1}}]),eventplanner.controller("PeriodeCtrl",["$scope",function(e){e.toegevoegdeStraten=[],e.getOverlap=function(e){},e.straatToevoegen=function(t){void 0!==t&&void 0!==t.Id&&(e.toegevoegdeStraten.push(t),e.$broadcast("straatGeselecteerd"))},e.straatVerwijderen=function(t){var n=e.toegevoegdeStraten.indexOf(t);e.toegevoegdeStraten.splice(n,1)}}]),eventplanner.controller("StratenCtrl",["$scope","$http",function(e,t){e.getLocations=function(e){return void 0===e||e.length<2?void 0:t.get("/straten/straat?zoekstraat="+e).then(function(e){return e.data})},e.$on("straatGeselecteerd",function(){e.geselecteerdeStraat=""})}]),eventplanner.controller("ReservatiesCtrl",["$scope","reservatieSvc",function(e,t){e.openCalendar=function(t,n){t.preventDefault(),t.stopPropagation(),e[n]=!0},e.datumVan=moment().toJSON(),e.datumTot=moment().add(1,"month").toJSON(),e.callServer=function(n){void 0===n&&(n={pagination:{start:0,number:10},search:{predicateObject:{$:""}}}),e.isLoading=!0;var r=n.pagination,a=r.start||0,o=r.number||10,i=void 0===n.search.predicateObject?"":n.search.predicateObject.$;t.getReservatiesData(e.datumVan,e.datumTot,a,o,i).then(function(t){e.rowCollection=t.rows,n.pagination.numberOfPages=t.numberOfPages,e.isLoading=!1})}}]),eventplanner.directive("evenementheader",function(){return{scope:{evenementInfo:"=info"},template:"{{evenementInfo.titel}} ({{evenementInfo.eigenaar}})"}}),eventplanner.factory("reservatieSvc",["$http","$q","notifier",function(e,t,n){return{getReservatieData:function(r){var a=t.defer();return e.get("/api/Reservatie/GetReservatieData",{params:{EvenementId:r}}).success(a.resolve).error(function(){n.error("something went wrong!")}),a.promise},detailsEvenementOpslaan:function(t){e.post("/api/Reservatie/OmschrijvingAanpassen",t).success(function(){n.notify("changes saved succesfully")}).error(function(){n.error("something went wrong")})},getReservatiesData:function(r,a,o,i,s){var c=t.defer();return e.get("/api/Reservaties/GetForDate",{params:{DatumVan:r,DatumTot:a,Start:o,Number:i,SearchTerm:s}}).success(c.resolve).error(function(e){n.error("Er is iets misgelopen")}),c.promise}}}]),eventplanner.value("toastr",toastr),eventplanner.factory("notifier",["toastr",function(e){return e.options={closeButton:!1,debug:!1,newestOnTop:!1,progressBar:!1,positionClass:"toast-top-right",preventDuplicates:!1,onclick:null,showDuration:"300",hideDuration:"1000",timeOut:"5000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},{notify:function(t){e.success(t,"")},error:function(t){e.error(t,"")}}}]);